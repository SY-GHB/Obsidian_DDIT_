이제는 리스트랑 맵만 연습할거예요...
클래스개념이랑 리스트랑 맵 계속 할것임..
스터디 13 맵이그잼플을 계속 연습했다.
1 해시맵이 뭔지
2 데이터넣기연습
3 해시맵에서 값꺼내기
4 해시맵 선언방법
5 하...................................
6 주차비용 정산하기

package kr.or.ddit.study13.map;

import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.Scanner;

public class MapExpamle06 {
	public static void main(String[] args) {
		MapExpamle06 me = new MapExpamle06();
		me.process();
	}

	private void process() {
		//DB에 잇는 데이터라고 생각하면 된당.
		List<Map<String, Object>> data = dataInput();
		
		//1. 차 번호를 입력했을 때 주차한 시간을 구하기
		System.out.println("차량번호를 입력해주세요.");
		Scanner sc = new Scanner(System.in);
		String carNumber = sc.next();
		
		int min = getMin(carNumber, data);
		System.out.println(carNumber+": "+min+"분 주차하였습니다.");
		
		/*주차시간 쪼개기! 쪼개도 문자상태다.
		String str = "05:34";
		
		String h1 = str.split(":")[0];
		String m1 = str.split(":")[1]; 
		
		String str2 = "07:59";
		
		String h2 = str.split(":")[0];
		String m2 = str.split(":")[1];*/
		
		//이렇게 쓰면 소요시간이 분으로 나온다.
		/*String str = "05:34";
		String str2 = "07:59";
		int time = getTime(str2)-getTime(str);*/
		
		
		// 2. 주차한 시간을 구한 후 요금 정산하기.
		int price = getPrice(min);
		System.out.println("요금은: "+price+"원입니다.");
	}
	
	
	private int getPrice(int min) {
		//180분 이내 5000원 , 180분 이상일 때 10분당 600원
		
		int price = 0;
		
		if(min<=180) {
			price = 5000;
		}
		if(min>180) {
			price = 5000 + ((min-180+9)/10)*600;
		}
		
		
		return price;
	}

	public List<Map<String, Object>> dataInput(){
		List<Map<String, Object>> list = new ArrayList();
		
		HashMap<String, Object> m1 = new HashMap();
		m1.put("시각", "05:34");
		m1.put("차량 번호","5961");
		m1.put("내역", "입차");
		
		HashMap<String, Object> m2 = new HashMap();
		m2.put("시각", "05:34");
		m2.put("차량 번호","5961");
		m2.put("내역", "입차");
		
		HashMap<String, Object> m3 = new HashMap();
		m3.put("시각", "06:00");
		m3.put("차량 번호", "0000");
		m3.put("내역", "입차");
		
		HashMap<String, Object> m4 = new HashMap();
		m4.put("시각", "06:34");
		m4.put("차량 번호", "0000");
		m4.put("내역", "출차");
		
		HashMap<String, Object> m5 = new HashMap();
		m5.put("시각", "07:59");
		m5.put("차량 번호", "5961");
		m5.put("내역", "출차");
		
		HashMap<String, Object> m6 = new HashMap();
		m6.put("시각", "07:59");
		m6.put("차량 번호", "0148");
		m6.put("내역", "입차");
		
		HashMap<String, Object> m7 = new HashMap();
		m7.put("시각", "18:59");
		m7.put("차량 번호", "0000");
		m7.put("내역", "입차");
		
		HashMap<String, Object> m8 = new HashMap();
		m8.put("시각", "19:10");
		m8.put("차량 번호", "0148");
		m8.put("내역", "출차");
		
		HashMap<String, Object> m9 = new HashMap();
		m9.put("시각", "22:59");
		m9.put("차량 번호", "5961");
		m9.put("내역", "입차");
		
		HashMap<String, Object> m10 = new HashMap();
		m10.put("시각", "23:00");
		m10.put("차량 번호", "5961");
		m10.put("내역", "출차");
		
		
		list.add(m1);
		list.add(m2);
		list.add(m3);
		list.add(m4);
		list.add(m5);
		list.add(m6);
		list.add(m7);
		list.add(m8);
		list.add(m9);
		list.add(m10);
		
		
		return list;
		
		
	}

	public int getMin(String carNumber, List<Map<String, Object>> data) {
		int sum = 0;
		//for문이 끝나도 저장될 수 있게 밖에서 선언하자.
		String temp = "";
		for (int i = 0; i < data.size(); i++) {
			//리스트에서 맵을 꺼내오자
			Map<String, Object> map = data.get(i);
			//내가 입력받지 않은 차량번호는 넘겨버리는 과정
			String number = (String) map.get("차량 번호");
			if(!number.equals(carNumber)) continue;
			
			String inout = (String)map.get("내역");
			if(inout.equals("입차")) {
				//입차시간을 temp에 임시로 저장해놓고
				temp = (String) map.get("시각");
			}
			if(inout.equals("출차")) {
				//출차시간에서 입차시간을 빼자.
				String out = (String) map.get("시각");
				int time = getTime(out)-getTime(temp);
				
				//여러번 오갔으면 입출차시간의 차를 다 합해주자.
				sum += time;
			}

		}
		return sum;
		
	}

	//주차시간을 분으로 환산하는 메소드
	public int getTime(String time) {
		String h1 = time.split(":")[0];
		String m1 = time.split(":")[1];
		
		return Integer.parseInt(h1)*60 + Integer.parseInt(m1);
	}