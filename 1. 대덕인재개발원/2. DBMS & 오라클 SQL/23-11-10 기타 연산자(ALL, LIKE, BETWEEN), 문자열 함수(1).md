###### 3) ALL 연산자
- 주어진 복수개의 자료 모두를 만족해야 결과가 참이 되는 연산자.
	그렇게 많이 사용되지는 않는다.
- ==expr 관계연산자ALL(값[, 값2,... 값n])== 의 형식
	'관계연산자'에 '='연산자는 사용할 수 없다. 
	(1이면서 2이면서 3인 수는 존재할 수 없으니까..제 1정규형 때문임.)
	제 1정규형: 하나의 컬럼에는 하나의 값만 들어간다. 
- 관계연산자 값1 AND 관계연산자 값2 AND...... 관계연산자 값n으로 바꿔쓸수도 있다.
- 사용예
 HR계정의 사원테이블에서 50번 부서에 속한 사원 중 가장 급여가 많은 사원보다 더 많은 급여를 사원들을 조회하시오.  Alias 사원번호, 사원명, 부서번호, 급여
```
(50번 부서에 속한 사원들의 급여)
 SELECT SALARY
  FROM HR.EMPLOYEES
  WHERE DEPARTMENT_ID=50
  ORDER BY 1 DESC;

(50번 부서의 최대급여.)
 SELECT MAX(SALARY)
  FROM HR.EMPLOYEES
  WHERE DEPARTMENT_ID=50;
  
(결과)
 SELECT EMPLOYEE_ID AS 사원번호,
        EMP_NAME AS 사원명,
        DEPARTMENT_ID AS 부서번호,
        SALARY AS 급여
  FROM HR.EMPLOYEES
  WHERE SALARY>ALL( SELECT SALARY
                     FROM HR.EMPLOYEES
                     WHERE DEPARTMENT_ID=50)
  ORDER BY 4;
```

###### 4) LIKE 연산자
- 광범위한 결과를 내므로 <u>효율성은 떨어진다</u>.(성능이 별로다=웬만하면 쓰지 마라.)
- 문자열 비교 연산자: 형식지정 문자열을 이용해서 그 문자열 속의 값을 비교, 판단할 때 사용한다.
- 형식지정 문자열``(와일드 카드: '%', '_')``을 사용하여 패턴 비교
- '%': 문자 시퀀스 '%'가 사용된 위치부터 나머지 모든 문자열과 대응
	-- NULL과도 대응할 수 있다. '대'하고도 반응한다는 소리.
	ex) '대%' : '대'로 시작하는 모든 문자열과 대응
       '%대%': 단어 중 '대'를 포함하는 모든 문자열과 대응
       '%대': '대'로 끝나는 모든 문자열과 대응
       
- ``'_'``: 문자 시퀀스 ``'_'``가 사용된 위치부터 한 문자와 대응
	 --두개 사용되면 두 글자와 대응된다. 개당 하나씩 대응, 여러 개 사용 가능.
    ex) '대_' : 2글자 이내이며 '대'로 시작하는 문자열과 대응
    ``'_대_'``: 3글자로 이내로 구성구성되며, 단어 중 '대'를 포함하는 문자열과 대응
    ``'_대'``: '대'로 끝나는 2글자 이내의 문자열과 대응
 - <u>날짜나 숫자자료에는 사용하지 말 것</u>. 문자열 연산자니까!! 

- 사용예
  1. 상품테이블(PROD)에서 분류코드가 P100번대에 속한 상품들을 조회하시오.
  분류코드 순으로 출력할 것, Alias 는 상품코드, 상품명, 분류코드, 매출가격
 ```
 SELECT PROD_ID AS 상품코드,
	    PROD_NAME AS 상품명,
	    PROD_LGU AS 분류코드,
		PROD_PRICE AS 매출가격
    FROM PROD
    WHERE PROD_LGU LIKE 'P1%';
 ```
 2. 장바구니 테이블(CART)에서 2020년 6월에 판매된 정보를 조회하시오.
	 Alias 는 구매회원 번호, 구매일자, 제품코드, 구매수량
	 -- 장바구니 번호는 날짜 8자리+구매번호5자리로 총 13자리가 된 번호이다.
  ```
  SELECT CART_MEMBER AS "구매회원 번호",
  -- 함정1: Alias(별칭)에 특수문자를 쓰려면 ""로 묶어줘야 한댔다.
  -- 매입상품 코드X "매입상품 코드" 매입상품코드O
               TO_DATE(SUBSTR(CART_NO,1,8)) AS 구매일자,
               -- 장바구니 번호에서 날짜정보를 뽑아냈다.
               CART_PROD AS 제품코드,
               CART_QTY AS 구매수량
         FROM CART
         WHERE CART_NO LIKE '202006%'; 
  ```
 3. 매입테이블(BUYPROD)에서 2020년 2월의 매입정보를 조회하시오.
	Alias 는 매입일, 매입상품코드, 매입수량, 단가, 금액 
  ```
   SELECT BUY_DATE AS 매입일,
               BUY_PROD AS 매입상품코드,
               BUY_QTY AS 매입수량,
               BUY_COST AS 단가,
               BUY_QTY*BUY_COST AS 금액
          FROM BUYPROD
          1. WHERE BUY_DATE BETWEEN '20200201' AND LAST_DAY('20200201');
          2. WHERE BUY_DATE >= '20200201' AND BUY_DATE <=LAST_DAY('20200201'); 
          3. WHERE BUY_DATE LIKE '2020/02%'; 
  ```
 -  2월은 28일이거나 29일로 끝나는데?? 말일을 구하는 함수가 있다. 
 - 1. LAST_DAY('문자열') 문자열 자료에 포함된 월의 마지막 날을 구하는 함수다.
    괄호 안은 날짜자료가 와야 하지만, 오라클은 숫자>날짜>문자열 우선순위므로
    날짜로 바뀔 수 있는 문자열이 들어왔기에 날짜로 작동한 것이다.
- 2. BETWEEN을 모르면 AND연산자로도 범위를 지정할 수 있다.
- 3. LIKE에 숫자/날짜 쓰지 말랬지!! 출력은 되지만, 이런식으로 하지 마라.
	모든 날짜타입의 구분기호가 표준화되어있는 건 아니기 때문에, 오류가 나기 쉽다.

###### 5) BETWEEN 연산자
- 범위를 지정하는 연산자.
- 모든 타입의 자료에 사용 가능
- AND 연산자를 대신할 수 있음
-  ==expr BETWEEN 값1 AND 값2;== 의 사용형식.
	'값1'과 '값2'는 같은 타입
	'값1'에서 '값2'까지의 범위를 지정하여 비교
	IN 연산자는 불연속 자료를 비교하고, AND 와 BETWEEN 연산자는 연속된 자료를 비교한다.
- 사용예
  상품테이블에서 'P100'~'P200'번대의 상품 중 판매가격이 50만원 이상인 상품만 조회하시오.
  Alias 는 상품번호, 상품명, 분류코드, 판매가격
 ```
(AND 연산자 사용)
       SELECT PROD_ID AS 상품번호,
              PROD_NAME AS 상품명,
              PROD_LGU AS 분류코드,
              PROD_PRICE AS 판매가격
        FROM PROD
        WHERE PROD_LGU>='P100' AND PROD_LGU<='P299' 
          AND PROD_PRICE >= 500000;
          
        (BETWEEN 연산자 사용)
        SELECT PROD_ID AS 상품번호,
               PROD_NAME AS 상품명,
               PROD_LGU AS 분류코드,
               PROD_PRICE AS 판매가격
         FROM PROD
         WHERE PROD_LGU BETWEEN 'P100' AND 'P299' 
           AND PROD_PRICE >= 500000;
 ```

### 함수(FUNCTION)
- 오라클 함수는 API에서 제공하는 함수와 사용자 정의함수(USER DEFINED FUNCTION)으로 구분한다.
- 함수의 대상 자료 타입에 따라 문자열, 숫자, 날짜, 변환, 집합그룹((합, 평균, 최대, 최소, 갯수)), 윈도우 함수, 널처리함수 로 구분된다.
- 함수는 반환값이 존재한다. (반환값이 없는 모듈은 프로시져(PROCEDURE)이다.)
- 반환값이 있기 때문에 SELECT 와 WHERE 등에서 사용할 수 있다. (반환값이 없는 PROCEDURE는 사용할 수 없다.)
- 함수는 함수를 포함할 수 있다.(단, 집계함수끼리는 포함할 수 없다.)
 
#### 1. 문자열 함수
##### 1)'||'와 CONCAT
-  문자열 결합 기능, 자바의 문자열 결합연산자 '+'와 같은 기능이다.
-  '||'는 문자열 결합 연산자이다.
-  ==CONCAT(c1, c2)==의 형식이다.
	문자열 'c1'과 'c2'를 결합한 새로운 문자열 반환.
	문자열 2개만 붙일 수 있다.
	CONCAT을 두 번 겹치면 문자열 세 개를 붙일 수 있긴 한데, 그러느니 ||쓰자.
- 사용예
 ```
 SELECT CONCAT('DB 모델링과 ','오라클 SQL')
 FROM DUAL;
 -- DUAL은 가상테이블이라고 했었다.
 ```

##### 2) LOWER, UPPER, INITCAP
- 대문자로 변환(UPPER), 소문자로 변환(LOWER), 단어의 첫글자만 대문자로 변환(INITCAP)하는 함수. 대소문자 구별이 없는 문자와는 아무 상관이 없다.
- 사용예
 ```
 SELECT EMP_NAME AS 이름1,
             LOWER(EMP_NAME) AS "LOWER CASE",
             UPPER(EMP_NAME) AS "UPPER CASE",
             INITCAP(LOWER(EMP_NAME)) AS "INITCAP" 
        FROM HR.EMPLOYEES
        WHERE DEPARTMENT_ID=80;
 ```
 단어와 단어를 구별하는 구별자는 공백이다. 문자열이 아니더라도, 오라클의 기본 구별자는 공백. 이렇게 잘린 단어 하나하나를 토큰이라고 한다.

#### 숙제: 오라클에서 사용되는 함수 종류 찾아보기
###### 1. 집계 함수
- MAX 컬럼명 : 최대값을 구하는 함수
- MIN 컬럼명 : 최소값을 구하는 함수
- AVG 컬럼명 : 평균값을 구하는 함수
- SUM 컬럼명 :  합계를 구하는 함수
- MOD (A, B) : A를 B로 나눈 나머지값을 구하는 함수 (자바의 %)
- COUNT (``*``) : 총 레코드 수(=row, tupple)를 세는 함수, NULL도 포함한다.
- COUNT 컬럼명 : 컬럼명을 기준으로 총 레코드 수를 세는 함수, NULL값은 제외한다.

###### 2. 문자열 함수
- LOWER(컬럼명|문자열) : 해당 컬럼이나 문자열의 값을 소문자로 변환하는 함수.
- UPPER(컬럼명|문자열) : 해당 컬럼이나 문자열의 값을 대문자로 변환하는 함수.
- INITCAP(컬럼명|문자열) : 공백을 기준으로 단어의 첫 글자를 대문자로 변환하는 함수
- CONCAT : 두 개의 문자열을 연결하는 함수
- SUBSTR(문자열, 값1, [값2]) :  문자열의 값1번째 자리부터 값2만큼 추출하는 함수. 값2가 생략되면 전체를 추출한다.
- LENGTH(문자열) : 문자열의 총 길이를 세는 함수
- INSTR(문자열, 특정문자) : 문자열에서 특정 문자의 위치를 세는 함수, 특정 문자가 문자열에 없다면 0을 반환한다.
- LPAD(문자열, 값, 특정문자) : 값-문자열의 길이만큼 왼쪽에 특정 문자를 채우는 함수
- RPAD(문자열, 값, 특정문자) : 값-문자열의 길이만큼 오른쪽에 특정 문자를 채우는 함수
- TRIM(공백이 있는 문자열) : 공백을 제거하는 함수
- LTRIM(문자열, 특정문자) : 왼쪽부터 문자열에서 해당 특정문자를 제거하는 함수
- RTRIM(문자열, 특정문자) : 오른쪽부터 문자열에서 해당 특정문자를 제거하는 함수
- REPLACE(문자열, 특정문자1, 특정문자2) : 문자열에서 특정문자 1을 특정문자 2로 바꾸는 함수
- NVL(expr1, expr2) : expr1이 null이면 expr2값으로 반환하는 함수
- NVL(expr1, expr2, expr3) : expr1과 null1을 비교해 null이 아니면 expr2, null이면 expr3을 반환하는 함수.
- NULLIF(expr1, expr2) : expr1과 expr2를 비교하여 같으면 null, 다르면 expr1을 반환하는 함수
- COALESCE(expr1, expr2, ... exprn) : expr1~exprn목록에서 첫 번째로 null이 아닌 expr을 반환하는 함수
- || :  문자열 결합 연산자.

###### 3. 숫자 함수
- ABS(숫자) : 절대값을 계산하는 함수
- MOD (A, B) : A를 B로 나눈 나머지값을 구하는 함수 (자바의 %, 집계함수에도 적어뒀다.)
- CEIL(실수) : 소수점 아래의 숫자가 있으면 소수점 아래를 다 버리고 정수부에 1을 더해주는 함수, 올림을 해주는 함수, 천장함수
- FLOOR(실수) :소수점 아래의 숫자가 있으면 소수점 아래를 다 버리는 함수, 바닥함수
- ROUND(숫자1, 숫자2) : 숫자1을 숫자2자리까지 반올림하는 함수. 
- TRUNC(숫자1, 숫자2) : 숫자1을 숫자2자리까지 버림하는 함수. (이건 수업시간에 써 봤다.)
- TO_NUMBER : 문자열을 숫자형으로 바꿔준다
 SELECT TO_NUMBER('123')+1 FROM DUAL; 의 형식으로 쓰면 문자열 123이 숫자로 변환되어 124가 출력된다.

###### 4. 날짜 함수
- SYSDATE : 시스템의 년, 월, 일을 불러오는 함수.
- MONTHS_BETWEEN(날짜1, 날짜2) : 날짜1에서 날짜2 사이 개월 수를 반환하는 함수.
- TO_DATE(문자열, 날짜형) : 문자열을 해당 날짜형으로 변환하는 함수
- ADD_MONTH(날짜, 숫자) : 해당 날짜에서 숫자만큼의 개월 수를 더한 날짜를 반환하는 함수
- NEXT_DAY(날짜, 요일) : 해당 날짜에서 최초로 도래하는 해당 요일의 날짜를 반환하는 함수
- LAST_DAY(날짜) : 해당 날짜가 포함되어 있는 달의 마지막 날짜를 반환하는 함수


###### 5. 형변환 함수
- TO_CHAR(원래 날짜, '원하는 모양') : 숫자와 날짜를 문자로 변환해 주는 함수
- TO_NUMBER('1'): 문자열을 숫자로 반환해주는 함수
- TO_DATE(문자열, 날짜형) : 문자열을 입력한 날짜형으로 변환하는 함수, 날짜의 시간이 12시간 단위면 hh24:mi:ss → hh:mi:ss로 변경하면 된다

###### 6. 사용자 정의 함수(User Defined Function)
선언 DECLARE: 변수, 상수, 타입 선언
시작 BEGIN: 사용자 함수 실행 시 시작 시점
- CONTROL 제어단위 블록별 실행흐름 제어, 조건문, 반복문 사용
- SQL: 데이터 관리를 위한 조회, 추가, 수정, 삭제
- EXCEPTION: 예외, 예외 중 실행 가능한 예외 상황 수행
- RETURN: 반환, 호출문에 함수값 적용
종료 END: 사용자 함수 실행 시 종료 시점

의 형태로 구성된다.

이하 선언부 형태
```
CREATE FUNCTION 함수명 --FUNCTION: 사용자 정의 함수를 사용한다는 의미
(파라미터_명
	MODE 데이터_타입)
IS  
RETURN 데이터_타입
변수 선언

CREATE OR REPLACE FUNCTION 함수명 -- OR REPLACE: 기존 사용자 정의함수가 존재하면 현재 컴파일하는 내용으로 덮어쓴다.
(파라미터_명 -- 파라미터: UDF와 운영체제간 필요한 값을 전송하기 위한 인자
MODE 데이터_타입) --MODE: 변수의 입출력을 구분. IN, OUT, INOUT으로 구성
AS
RETURN 데이터_타입 -- 파라미터에 대한 데이터 타입
변수 선언 -- UDF내에서 사용할 변수와 그 초기값 설정
```