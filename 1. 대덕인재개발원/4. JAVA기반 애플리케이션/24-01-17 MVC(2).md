만들어두었던 DBCUtil과
배운 것들을 이용해 MVC가 적용된 간단한 CRUD를 만들어보았다.

![[Pasted image 20240118191331.png]]

파일 구조는 이렇게 되어있다.
DBUtil3에
```
ResourceBundle bundle = ResourceBundle.getBundle("kr.or.ddit.config.dbinfo");
```
가 있으므로, kr.or.ddit.config 위치에 dbinfo라는 이름의 properties 파일이 있어야 한다.

만들면서 기록해두고 싶었던 내용:

###### 1. 조회수 기능
한창 컨트롤러를 만들다가 조회수 올리는 기능이 필요하단 걸 떠올려서 그걸  어떻게 구현할까 싶었는데, SQL 문을 하나 더 써야한다는 걸 깨달아서...

있는 메소드에 SQL문을 두 개 쓸까 싶었는데 선생님이 메소드 하나당 DB연결 하나라고 하셨어서 그냥 인터페이스에 새로 메소드를 만들었다.

DAO인터페이스, Service인터페이스, DAO구현, Service 구현까지 총 네번의 수정을 해야했었다. 이래서 설계를 잘 해야 하는구나.

그리고 SQL문도 이렇게 썼었는데,
```
UPDATE JDBC_BOARD SET BOARD_CNT = (SELECT BOARD_CNT FROM JDBC_BOARD WHERE BOARD_NO=?)+1 WHERE BOARD_NO =?
```

더 간단하게 이렇게 쓸 수 있었다.
```
UPDATE JDBC_BOARD SET BOARD_CNT = BOARD_CNT+1 WHERE BOARD_NO =?
```


###### 2. 매개변수는 하나
수정하는 메소드에서 int로 수정할 게시글 번호를, Map으로 수정할 컬럼명(key), 내용(value)을 매개변수로 받아 사용했는데 생각해보니 게시글번호도 컬럼명도 내용도 VO를 통하면 한꺼번에 처리할 수 있었다. 매개변수는 최대한 적게 사용하자.

###### 3. 전역변수의 활용
 1)어떤 게시글을 상세보기 했을 때 2)수정이나 3)삭제를 하도록 만든 게시판인데,
1)에서는 게시글의 번호를 받을 수 있지만 이미 상세보기로 들어온(게시글의 번호를 받은)상황에서 2)나 3)의 쿼리문에 필요하다고 또 게시글 번호를 입력하는 건 어딘가 조금 이상한 게시판이니까 그 게시글 번호를 컨트롤러 안에서 Map 전역변수로 담아 사용했었다. 초급때 sessionstorage란 변수명으로 잘 썼었으니까.

그런데..! 제목의 검색결과가 없어서 전체출력된 리스트인지
아니면 메인화면으로 돌아와 전체출력된 리스트인지(메인에 가자마자 리스트가 출력되도록 해 두었다.) 구분할 필요가 있었다.

어떻게 해야 할지 몰라서 그냥 맨 마지막에 메인화면의 선택지를 추가해버렸는데...
성진씨는 전역변수로 boolean 변수를 사용하셨다. 조금 더 다양한 활용을 고려해봐도 좋겠다.

